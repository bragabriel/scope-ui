<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard de Investimentos</h1>
    <p class="subtitle">Vis√£o panor√¢mica da sua carteira</p>
  </div>

  <!-- RESUMO TOTAL -->
  <div class="resumo-total">
    <div class="resumo-card total-card">
      <h3>Total da Carteira</h3>
      <p class="valor-grande">R$ {{ formatarMoeda(totalCarteira) }}</p>
      <span class="label">{{ carteiraTotal?.items.length || 0 }} tipos de investimento</span>
    </div>

    <div class="resumo-card">
      <h3>A√ß√µes</h3>
      <p class="valor">R$ {{ formatarMoeda(totalAcoes) }}</p>
      <span class="label">{{ quantidadeAcoes }} a√ß√µes</span>
      <a routerLink="/acoes" class="link-card">Ver detalhes ‚Üí</a>
    </div>

    <div class="resumo-card">
      <h3>FIIs</h3>
      <p class="valor">R$ {{ formatarMoeda(totalFiis) }}</p>
      <span class="label">{{ quantidadeFiis }} FIIs</span>
      <a routerLink="/fiis" class="link-card">Ver detalhes ‚Üí</a>
    </div>
  </div>

  <!-- GR√ÅFICOS -->
  <div class="graficos-section">
    <!-- GR√ÅFICO DE PIZZA - DIVERSIFICA√á√ÉO TOTAL -->
    <div class="grafico-card">
      <div class="grafico-header">
        <h2>Diversifica√ß√£o da Carteira</h2>
        <p class="grafico-subtitle">Propor√ß√£o de cada tipo de investimento</p>
      </div>
      <div class="grafico-wrapper">
        <canvas #graficoTotalCanvas></canvas>
      </div>
      <div class="grafico-legenda" *ngIf="carteiraTotal">
        <div class="legenda-item" *ngFor="let item of carteiraTotal.items">
          <div class="legenda-color" [style.backgroundColor]="item.cor"></div>
          <div class="legenda-info">
            <span class="legenda-tipo">{{ item.tipo }}</span>
            <span class="legenda-valor">
              R$ {{ formatarMoeda(item.valor) }} ({{ item.percentual.toFixed(1) }}%)
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- GR√ÅFICO DE BARRAS - COMPARATIVO -->
    <div class="grafico-card">
      <div class="grafico-header">
        <h2>Comparativo por Tipo</h2>
        <p class="grafico-subtitle">Valores absolutos de cada categoria</p>
      </div>
      <div class="grafico-wrapper-horizontal">
        <canvas #graficoComparativoCanvas></canvas>
      </div>
    </div>
  </div>

  <!-- ATALHOS R√ÅPIDOS -->
  <div class="atalhos-section">
    <h2>Atalhos R√°pidos</h2>
    <div class="atalhos-grid">
      <a routerLink="/acoes" class="atalho-card">
        <div class="atalho-icon">üìà</div>
        <h3>A√ß√µes</h3>
        <p>Gerenciar suas a√ß√µes</p>
      </a>

      <a routerLink="/fiis" class="atalho-card">
        <div class="atalho-icon">üè¢</div>
        <h3>FIIs</h3>
        <p>Gerenciar seus FIIs</p>
      </a>

      <a routerLink="/home" class="atalho-card">
        <div class="atalho-icon">‚ö†Ô∏è</div>
        <h3>Radar</h3>
        <p>Dicas de investimento</p>
      </a>
    </div>
  </div>

  <!-- INSIGHTS -->
  <div class="insights-section" *ngIf="carteiraTotal && carteiraTotal.items.length > 0">
    <h2>Insights da Sua Carteira</h2>
    <div class="insights-grid">
      <div class="insight-card" *ngIf="totalAcoes > 0">
        <h4>Maior Investimento</h4>
        <p class="insight-text">{{ (totalAcoes > totalFiis ? 'A√ß√µes' : 'FIIs') }}</p>
        <span class="insight-valor">
          {{ (totalAcoes > totalFiis ? formatarMoeda(totalAcoes) : formatarMoeda(totalFiis)) }}
        </span>
      </div>

      <div class="insight-card" *ngIf="quantidadeAcoes > 0">
        <h4>M√©dia por A√ß√£o</h4>
        <p class="insight-text">Valor m√©dio investido</p>
        <span class="insight-valor">
          R$ {{ formatarMoeda(totalAcoes / quantidadeAcoes) }}
        </span>
      </div>

      <div class="insight-card" *ngIf="quantidadeFiis > 0">
        <h4>M√©dia por FII</h4>
        <p class="insight-text">Valor m√©dio investido</p>
        <span class="insight-valor">
          R$ {{ formatarMoeda(totalFiis / quantidadeFiis) }}
        </span>
      </div>

      <div class="insight-card">
        <h4>Total de Posi√ß√µes</h4>
        <p class="insight-text">A√ß√µes + FIIs</p>
        <span class="insight-valor">
          {{ (quantidadeAcoes + quantidadeFiis) }}
        </span>
      </div>
    </div>
  </div>

  <!-- ESTADO VAZIO -->
  <div class="vazio-estado" *ngIf="!carteiraTotal || carteiraTotal.items.length === 0">
    <div class="vazio-content">
      <h2>Sua carteira est√° vazia</h2>
      <p>Comece adicionando a√ß√µes ou FIIs para ver seu dashboard</p>
      <div class="vazio-buttons">
        <a routerLink="/acoes" class="btn btn-primary">
          ‚ûï Adicionar A√ß√£o
        </a>
        <a routerLink="/fiis" class="btn btn-secondary">
          ‚ûï Adicionar FII
        </a>
      </div>
    </div>
  </div>
</div>